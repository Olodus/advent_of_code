# Read input
input â† â€¢file.At âŠ‘ â€¢args
lines â† â€¢FLines input

# Parse array of number strings to numbers
ParseInt â† {(âˆ¾Â´(-âŸœ"0")Â¨ğ•©)}
DigitArrayâ†{(â‰ ğ•©)â€¿(â‰ âŠ‘ğ•©)â¥Šâˆ¾Â´ğ•©}

# Surrounding a matrix on all sides with a given number
# This is used to get proper kernels for the days tasks
PrependMatrixâ†{((â‰ â‰ğ•©)â¥Šğ•¨)âˆ¾ğ•©}
SurroundMatrix â† {â‰âŒ½â‰ğ•¨ PrependMatrix 1âŒ½â‰ğ•¨ PrependMatrix âŒ½(ğ•¨ PrependMatrix â‰(ğ•¨ PrependMatrix ğ•©))}

# Part 1 functions
Step â† {ğ•©++Â´Â¨10â‰¤Â¨â¥ŠÂ¨<â‰2 3â€¿3â†•(0 SurroundMatrix (ğ•¨+Â¨ğ•©))}
FinalizeStep â† {ğ•©Ã—10â‰¥ğ•©} 
NrFlashes â† {+Â´10â‰¤Â¨â¥Šğ•©}
NewFlashes â† {(NrFlashes 0âŠ¸Step ğ•©) > NrFlashes ğ•©}
FullStep â† {
    NewFlashes 0âŠ‘ğ•© ?
    âŸ¨0âŠ¸Step 0âŠ‘ğ•©, 1âŠ‘ğ•©,2âŠ‘ğ•©âŸ© ;
    âŸ¨1âŠ¸Step FinalizeStep 0âŠ‘ğ•©, (1âŠ‘ğ•©) + NrFlashes (0âŠ‘ğ•©),(2âŠ‘ğ•©)-1âŸ©
}
Iteration â† {(2âŠ‘ğ•©) > 0 ? Iteration FullStep ğ•© ; ğ•©}

state â† âŸ¨1âŠ¸Step DigitArray ParseIntÂ¨lines,0,2âŸ©
â€¢Show "Part 1 answer:"
#â€¢Show Iteration state
â€¢Show FullStep state

